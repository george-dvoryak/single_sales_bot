# Telegram –±–æ—Ç –¥–ª—è –ø—Ä–æ–¥–∞–∂–∏ –∫—É—Ä—Å–æ–≤ –ø–æ –º–∞–∫–∏—è–∂—É

–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª:
- –ö–∞—Ç–∞–ª–æ–≥ –∫—É—Ä—Å–æ–≤ –∏–∑ Google Sheets (–∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å).
- –ü–æ–∫—É–ø–∫–∞ –¥–æ—Å—Ç—É–ø–∞ —á–µ—Ä–µ–∑ Telegram Payments (YooKassa).
- –ê–≤—Ç–æ–≤—ã–¥–∞—á–∞ –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è –≤ –ø—Ä–∏–≤–∞—Ç–Ω—ã–π –∫–∞–Ω–∞–ª –∫—É—Ä—Å–∞, –∑–∞–ø—Ä–µ—Ç –ø–æ–≤—Ç–æ—Ä–Ω–æ–π –ø–æ–∫—É–ø–∫–∏ –∞–∫—Ç–∏–≤–Ω–æ–≥–æ –∫—É—Ä—Å–∞.
- –°–ø–∏—Å–æ–∫ –∞–∫—Ç–∏–≤–Ω—ã—Ö –ø–æ–¥–ø–∏—Å–æ–∫, –∫–Ω–æ–ø–∫–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∏.
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ –∏–∑ –∫–∞–Ω–∞–ª–æ–≤ –ø–æ –∏—Å—Ç–µ—á–µ–Ω–∏–∏ —Å—Ä–æ–∫–∞ (cron-—Å–∫—Ä–∏–ø—Ç).
- –ê–¥–º–∏–Ω-—Ä–∞—Å—Å—ã–ª–∫–∏: –≤—Å–µ–º / –ø–æ–∫—É–ø–∞—Ç–µ–ª—è–º / –Ω–µ–ø–æ–∫—É–ø–∞—Ç–µ–ª—è–º.

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞
- `.env` ‚Äî —Ñ–∞–π–ª —Å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏ –æ–∫—Ä—É–∂–µ–Ω–∏—è (—Ç–æ–∫–µ–Ω—ã, ID, URL-—ã). **–ù–ï –∫–æ–º–º–∏—Ç–∏—Ç—å –≤ git!**
- `.env.example` ‚Äî –ø—Ä–∏–º–µ—Ä —Ñ–∞–π–ª–∞ —Å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏ –æ–∫—Ä—É–∂–µ–Ω–∏—è (–º–æ–∂–Ω–æ –∫–æ–º–º–∏—Ç–∏—Ç—å).
- `config.py` ‚Äî –∑–∞–≥—Ä—É–∑–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –∏–∑ `.env` —Ñ–∞–π–ª–∞.
- `db.py` ‚Äî SQLite (–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏, –ø–æ–∫—É–ø–∫–∏).
- `google_sheets.py` ‚Äî –∑–∞–≥—Ä—É–∑–∫–∞ –∫—É—Ä—Å–æ–≤/—Ç–µ–∫—Å—Ç–æ–≤ –∏–∑ Google Sheets (CSV –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é).
- `main.py` ‚Äî –ª–æ–≥–∏–∫–∞ –±–æ—Ç–∞ (–º–µ–Ω—é, –∫–∞—Ç–∞–ª–æ–≥, –ø–æ–∫—É–ø–∫–∞, –≤—ã–¥–∞—á–∞ –¥–æ—Å—Ç—É–ø–∞, —Ä–∞—Å—Å—ã–ª–∫–∏).
- `webhook_app.py` ‚Äî Flask-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è –≤–µ–±—Ö—É–∫–∞ (PythonAnywhere).
- `remove_expired.py` ‚Äî —É–¥–∞–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏–∑ –∫–∞–Ω–∞–ª–æ–≤ –ø–æ –∏—Å—Ç–µ—á–µ–Ω–∏–∏ —Å—Ä–æ–∫–∞.
- `requirements.txt` ‚Äî –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏.

## Google Sheets
–î–≤–∞ –ª–∏—Å—Ç–∞: **Courses** –∏ **Texts**.
- Courses: `id, name, description, price, duration_minutes, image_url, channel`
- Texts: `key, value` (–Ω–∞–ø—Ä–∏–º–µ—Ä: `welcome_message`, `support_message`, `catalog_title`, `welcome_image_url`, `catalog_image_url`, `catalog_text`)

–î–ª—è –ø—Ä–æ—Å—Ç–æ—Ç—ã –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø—É–±–ª–∏–∫–∞—Ü–∏—é –ª–∏—Å—Ç–æ–≤ –∫–∞–∫ CSV:     File ‚Üí Publish to the web ‚Üí –≤—ã–±—Ä–∞—Ç—å –ª–∏—Å—Ç ‚Üí –ø–æ–ª—É—á–∏—Ç—å CSV. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ `GSHEET_ID` –∏ –∏–º–µ–Ω–∞ –ª–∏—Å—Ç–æ–≤ –≤ `.env` —Ñ–∞–π–ª–µ.

## –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è

### 1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
```bash
pip install -r requirements.txt
```

### 2. –°–æ–∑–¥–∞–Ω–∏–µ .env —Ñ–∞–π–ª–∞
–°–∫–æ–ø–∏—Ä—É–π—Ç–µ `.env.example` –≤ `.env` –∏ –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –∑–Ω–∞—á–µ–Ω–∏—è:
```bash
cp .env.example .env
```

–ó–∞—Ç–µ–º –æ—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ `.env` —Ñ–∞–π–ª –∏ —É–∫–∞–∂–∏—Ç–µ –≤–∞—à–∏ –∑–Ω–∞—á–µ–Ω–∏—è:
- `TELEGRAM_BOT_TOKEN` ‚Äî —Ç–æ–∫–µ–Ω –±–æ—Ç–∞ (BotFather).
- `PAYMENT_PROVIDER_TOKEN` ‚Äî —Ç–æ–∫–µ–Ω YooKassa –¥–ª—è Telegram Payments (–≤ BotFather ‚Üí Payments).
- `GSHEET_ID` ‚Äî ID –≤–∞—à–µ–π Google —Ç–∞–±–ª–∏—Ü—ã.
- `ADMIN_IDS` ‚Äî —Å–ø–∏—Å–æ–∫ Telegram user_id —á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é (–Ω–∞–ø—Ä–∏–º–µ—Ä: `123456789,987654321`).

**–í–∞–∂–Ω–æ:** –§–∞–π–ª `.env` —Å–æ–¥–µ—Ä–∂–∏—Ç —Å–µ–∫—Ä–µ—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∏ **–ù–ï –¥–æ–ª–∂–µ–Ω** –ø–æ–ø–∞–¥–∞—Ç—å –≤ git! –û–Ω —É–∂–µ –¥–æ–±–∞–≤–ª–µ–Ω –≤ `.gitignore`.

### 3. –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è (.env —Ñ–∞–π–ª)

**–û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ:**
- `TELEGRAM_BOT_TOKEN` ‚Äî —Ç–æ–∫–µ–Ω –±–æ—Ç–∞ (BotFather).
- `PAYMENT_PROVIDER_TOKEN` ‚Äî —Ç–æ–∫–µ–Ω YooKassa –¥–ª—è Telegram Payments.
- `GSHEET_ID` ‚Äî ID Google —Ç–∞–±–ª–∏—Ü—ã.
- `ADMIN_IDS` ‚Äî —Å–ø–∏—Å–æ–∫ Telegram user_id —á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é.

**–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ:**
- `DATABASE_PATH` ‚Äî –ø—É—Ç—å –∫ SQLite (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é `bot.db`).
- `GSHEET_COURSES_NAME` ‚Äî –∏–º—è –ª–∏—Å—Ç–∞ —Å –∫—É—Ä—Å–∞–º–∏ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é `Courses`).
- `GSHEET_TEXTS_NAME` ‚Äî –∏–º—è –ª–∏—Å—Ç–∞ —Å —Ç–µ–∫—Å—Ç–∞–º–∏ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é `Texts`).
- `GOOGLE_SHEETS_USE_API` ‚Äî `True` –¥–ª—è gspread, –∏–Ω–∞—á–µ CSV.
- `GOOGLE_CREDENTIALS_FILE` ‚Äî JSON —Å–µ—Ä–≤–∏—Å–Ω–æ–≥–æ –∞–∫–∫–∞—É–Ω—Ç–∞ (–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ gspread).
- `USE_WEBHOOK`, `WEBHOOK_HOST`, `WEBHOOK_PATH` ‚Äî –¥–ª—è PythonAnywhere –≤–µ–±—Ö—É–∫–∞.

## –ü—Ä–∞–≤–∞ –±–æ—Ç–∞ –≤ –∫–∞–Ω–∞–ª–∞—Ö
–ë–æ—Ç –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º –∫–∞–∂–¥–æ–≥–æ –∫–∞–Ω–∞–ª–∞-–∫—É—Ä—Å–∞ —Å –ø—Ä–∞–≤–∞–º–∏:
- –î–æ–±–∞–≤–ª—è—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (—Å–æ–∑–¥–∞–≤–∞—Ç—å –∏–Ω–≤–∞–π—Ç-—Å—Å—ã–ª–∫–∏).
- –£–¥–∞–ª—è—Ç—å/–±–∞–Ω–∏—Ç—å/—Ä–∞–∑–±–∞–Ω–∏–≤–∞—Ç—å —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤.

## –õ–æ–∫–∞–ª—å–Ω—ã–π –∑–∞–ø—É—Å–∫ (polling)
1. `pip install -r requirements.txt`
2. –°–æ–∑–¥–∞–π—Ç–µ `.env` —Ñ–∞–π–ª –∏–∑ `.env.example` –∏ –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ.
3. `python main.py` (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é polling, –µ—Å–ª–∏ `USE_WEBHOOK` –Ω–µ –≤–∫–ª—é—á–µ–Ω).

## PythonAnywhere (webhook)

**üìñ –ü–æ–ª–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—é**: –°–º. [PYTHONANYWHERE_DEPLOYMENT.md](PYTHONANYWHERE_DEPLOYMENT.md)

### –ö—Ä–∞—Ç–∫–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è:

1. –ó–∞–≥—Ä—É–∑–∏—Ç–µ –ø—Ä–æ–µ–∫—Ç (—á–µ—Ä–µ–∑ Git –∏–ª–∏ Files tab)
2. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏: `pip install --user -r requirements.txt`
3. –°–æ–∑–¥–∞–π—Ç–µ `.env` —Ñ–∞–π–ª —Å –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–º–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏
4. –°–æ–∑–¥–∞–π—Ç–µ Web app (Flask, Python 3.10+)
5. –í WSGI-—Ñ–∞–π–ª–µ:
   ```python
   import sys
   path = '/home/<username>/makeup_courses_bot'
   if path not in sys.path:
       sys.path.insert(0, path)
   from webhook_app import app as application
   ```
6. –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç–µ web app

**–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—á–∏—Å—Ç–∫–∞**: –í—Å—Ç—Ä–æ–µ–Ω–∞ –≤ –∫–æ–¥! –û—á–∏—Å—Ç–∫–∞ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è:
- –ü—Ä–∏ —Å—Ç–∞—Ä—Ç–µ web app
- –ö–∞–∂–¥—ã–π —á–∞—Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤ —Ñ–æ–Ω–æ–≤–æ–º —Ä–µ–∂–∏–º–µ

–õ–æ–≥–∏ –º–æ–∂–Ω–æ —É–≤–∏–¥–µ—Ç—å –≤ Error log –≤ —Ä–∞–∑–¥–µ–ª–µ Web.

## –£–¥–∞–ª–µ–Ω–∏–µ –ø—Ä–æ—Å—Ä–æ—á–µ–Ω–Ω—ã—Ö –ø–æ–¥–ø–∏—Å–æ–∫ (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ)

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—á–∏—Å—Ç–∫–∞ –≤—Å—Ç—Ä–æ–µ–Ω–∞ –≤ –∫–æ–¥!

–ü—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ `webhook_app.py` (PythonAnywhere), –æ—á–∏—Å—Ç–∫–∞ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
- ‚úÖ **–ü—Ä–∏ —Å—Ç–∞—Ä—Ç–µ web app** - —Å—Ä–∞–∑—É –ø–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞
- ‚úÖ **–ö–∞–∂–¥—ã–π —á–∞—Å** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤ —Ñ–æ–Ω–æ–≤–æ–º —Ä–µ–∂–∏–º–µ

–õ–æ–≥–∏ –º–æ–∂–Ω–æ —É–≤–∏–¥–µ—Ç—å –≤ Error log –≤ —Ä–∞–∑–¥–µ–ª–µ Web PythonAnywhere.

### –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

–ï—Å–ª–∏ –≤—ã —Ö–æ—Ç–∏—Ç–µ –±–æ–ª–µ–µ —á–∞—Å—Ç—É—é –æ—á–∏—Å—Ç–∫—É –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ –ª–æ–∫–∞–ª—å–Ω—ã–π –∑–∞–ø—É—Å–∫:

#### –í–∞—Ä–∏–∞–Ω—Ç 1: –õ–æ–∫–∞–ª—å–Ω—ã–π Linux/Mac (cron)

1. –û—Ç–∫—Ä–æ–π—Ç–µ crontab –¥–ª—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:
   ```bash
   crontab -e
   ```

2. –î–æ–±–∞–≤—å—Ç–µ —Å—Ç—Ä–æ–∫—É –¥–ª—è –∑–∞–ø—É—Å–∫–∞ –∫–∞–∂–¥—ã–µ 5 –º–∏–Ω—É—Ç:
   ```bash
   */5 * * * * cd /path/to/makeup_courses_bot && /usr/bin/python3 remove_expired.py >> /path/to/makeup_courses_bot/cleanup.log 2>&1
   ```

   –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ helper script:
   ```bash
   */5 * * * * /path/to/makeup_courses_bot/run_cleanup.sh >> /path/to/makeup_courses_bot/cleanup.log 2>&1
   ```

3. –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ –∏ –≤—ã–π–¥–∏—Ç–µ (–≤ nano: Ctrl+X, –∑–∞—Ç–µ–º Y, –∑–∞—Ç–µ–º Enter)

4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ cron —Ä–∞–±–æ—Ç–∞–µ—Ç:
   ```bash
   crontab -l
   ```

#### –í–∞—Ä–∏–∞–Ω—Ç 2: Windows (Task Scheduler)

1. –û—Ç–∫—Ä–æ–π—Ç–µ **Task Scheduler** (–ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –∑–∞–¥–∞–Ω–∏–π)
2. –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—É—é –∑–∞–¥–∞—á—É:
   - **Trigger**: –ü–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—é, –∫–∞–∂–¥—ã–µ 5 –º–∏–Ω—É—Ç
   - **Action**: –ó–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–æ–≥—Ä–∞–º–º—É
   - **Program**: `python.exe` (–∏–ª–∏ –ø–æ–ª–Ω—ã–π –ø—É—Ç—å –∫ python)
   - **Arguments**: `remove_expired.py`
   - **Start in**: –ü—É—Ç—å –∫ –ø–∞–ø–∫–µ –ø—Ä–æ–µ–∫—Ç–∞

#### –í–∞—Ä–∏–∞–Ω—Ç 3: –†—É—á–Ω–æ–π –∑–∞–ø—É—Å–∫ —á–µ—Ä–µ–∑ –±–æ—Ç–∞ (–¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è)

–ê–¥–º–∏–Ω—ã –º–æ–≥—É—Ç –∑–∞–ø—É—Å—Ç–∏—Ç—å –æ—á–∏—Å—Ç–∫—É –≤—Ä—É—á–Ω—É—é —á–µ—Ä–µ–∑ –∫–æ–º–∞–Ω–¥—É:
```
/cleanup_expired
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ —Å–∫—Ä–∏–ø—Ç–∞ (–µ—Å–ª–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã)
2. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–æ–º–∞–Ω–¥—É `/cleanup_expired` –≤ –±–æ—Ç–µ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ —É–¥–∞–ª—è—é—Ç—Å—è –∏–∑ –∫–∞–Ω–∞–ª–æ–≤ –ø–æ—Å–ª–µ –∏—Å—Ç–µ—á–µ–Ω–∏—è –≤—Ä–µ–º–µ–Ω–∏

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ —á–∞—Å—Ç–æ—Ç–µ –∑–∞–ø—É—Å–∫–∞

- **–ö–∞–∂–¥—ã–µ 5 –º–∏–Ω—É—Ç**: –¥–ª—è —Ç–æ—á–Ω–æ–≥–æ —É–¥–∞–ª–µ–Ω–∏—è (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
- **–ö–∞–∂–¥—ã–µ 15 –º–∏–Ω—É—Ç**: –∫–æ–º–ø—Ä–æ–º–∏—Å—Å –º–µ–∂–¥—É —Ç–æ—á–Ω–æ—Å—Ç—å—é –∏ –Ω–∞–≥—Ä—É–∑–∫–æ–π
- **–ö–∞–∂–¥—ã–π —á–∞—Å**: –º–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —á–∞—Å—Ç–æ—Ç–∞, –Ω–æ –≤–æ–∑–º–æ–∂–Ω–∞ –∑–∞–¥–µ—Ä–∂–∫–∞ –¥–æ —á–∞—Å–∞

## YooKassa –∏ —Ñ–∏—Å–∫–∞–ª–∏–∑–∞—Ü–∏—è
- –ü–æ–¥–∫–ª—é—á–∏—Ç–µ YooKassa –∫ –±–æ—Ç—É (BotFather ‚Üí Payments ‚Üí YooKassa).
- –í–∫–ª—é—á–∏—Ç–µ –∞–≤—Ç–æ–æ—Ç–ø—Ä–∞–≤–∫—É —á–µ–∫–æ–≤ –¥–ª—è —Å–∞–º–æ–∑–∞–Ω—è—Ç–æ–≥–æ (–≤ –∫–∞–±–∏–Ω–µ—Ç–µ YooKassa/–ú–æ–π –ù–∞–ª–æ–≥).
- –í `main.py` —Ñ—É–Ω–∫—Ü–∏—è `send_receipt_to_tax` ‚Äî –∑–∞–≥–ª—É—à–∫–∞ –¥–ª—è –∫–∞—Å—Ç–æ–º–Ω–æ–π –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏.

## –ö–æ–º–∞–Ω–¥—ã –∞–¥–º–∏–Ω–∞
- `/broadcast_all <—Ç–µ–∫—Å—Ç>` - —Ä–∞—Å—Å—ã–ª–∫–∞ –≤—Å–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º
- `/broadcast_buyers <—Ç–µ–∫—Å—Ç>` - —Ä–∞—Å—Å—ã–ª–∫–∞ —Ç–æ–ª—å–∫–æ –ø–æ–∫—É–ø–∞—Ç–µ–ª—è–º
- `/broadcast_nonbuyers <—Ç–µ–∫—Å—Ç>` - —Ä–∞—Å—Å—ã–ª–∫–∞ —Ç–æ–ª—å–∫–æ –Ω–µ–ø–æ–∫—É–ø–∞—Ç–µ–ª—è–º
- `/cleanup_expired` - –≤—Ä—É—á–Ω—É—é –∑–∞–ø—É—Å—Ç–∏—Ç—å –æ—á–∏—Å—Ç–∫—É –ø—Ä–æ—Å—Ä–æ—á–µ–Ω–Ω—ã—Ö –ø–æ–¥–ø–∏—Å–æ–∫ (–ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç)
- `/diag_channels` - –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –∫–∞–Ω–∞–ª–æ–≤ –∫—É—Ä—Å–æ–≤ (–ø—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ –±–æ—Ç–∞)

## –ó–∞–º–µ—á–∞–Ω–∏—è
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–≤—Ç–æ—Ä–Ω–æ–π –ø–æ–∫—É–ø–∫–∏ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞.
- –í–∞–ª–∏–¥–∞—Ü–∏—è –Ω–∞–ª–∏—á–∏—è –∫—É—Ä—Å–∞ –Ω–∞ —ç—Ç–∞–ø–µ pre-checkout.
- –ü—Ä–∏ —É—Å–ø–µ—à–Ω–æ–π –æ–ø–ª–∞—Ç–µ —Å–æ–∑–¥–∞–µ—Ç—Å—è –æ–¥–Ω–æ—Ä–∞–∑–æ–≤–∞—è –∏–Ω–≤–∞–π—Ç-—Å—Å—ã–ª–∫–∞ –Ω–∞ –∫–∞–Ω–∞–ª.
- –î–ª—è –ø—Ä–∏–≤–∞—Ç–Ω—ã—Ö –∫–∞–Ω–∞–ª–æ–≤ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ numeric ID (`-100...`) –∏ –≤—ã–¥–∞–π—Ç–µ –±–æ—Ç—É –ø—Ä–∞–≤–∞ –∞–¥–º–∏–Ω–∞.
